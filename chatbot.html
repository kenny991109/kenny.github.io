<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê°ì„± ì±—ë´‡</title>
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      background-color: #f0f0f0; /* ë°ì€ íšŒìƒ‰ ë°°ê²½ */
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    #home-button {
      position: absolute;
      top: 20px;
      left: 20px;
      text-decoration: none;
      background-color: #5865F2; /* Discord ìƒ‰ìƒ ê³„ì—´ */
      color: white;
      padding: 10px 15px;
      border-radius: 5px;
      font-weight: bold;
      z-index: 10; /* ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— í‘œì‹œ */
    }
    #home-button:hover {
      background-color: #4752C4;
    }
    #chat-container {
      width: 100%;
      max-width: 450px; /* ì ì ˆí•œ ìµœëŒ€ ë„ˆë¹„ */
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      padding: 20px;
      display: flex;
      flex-direction: column;
      height: 600px; /* ì¢€ ë” ë†’ê²Œ */
    }
    #chat-header {
      padding: 15px 0;
      text-align: center;
      border-bottom: 1px solid #eee;
      margin-bottom: 15px;
    }
    #chat-header h2 {
      margin: 0;
      color: #333;
      font-size: 20px;
    }
    #chat-menu {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    .menu-button {
      background-color: #e0e0e0;
      color: #333;
      border: none;
      border-radius: 20px;
      padding: 8px 12px;
      font-size: 14px;
      cursor: pointer;
    }
    .menu-button:hover {
      background-color: #d0d0d0;
    }
    #chat-box {
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      scrollbar-width: thin; /* Firefox */
      scrollbar-color: #aaa #f0f0f0; /* Firefox */
    }
    #chat-box::-webkit-scrollbar {
      width: 8px;
    }
    #chat-box::-webkit-scrollbar-thumb {
      background-color: #aaa;
      border-radius: 10px;
    }
    #chat-box::-webkit-scrollbar-track {
      background-color: #f0f0f0;
      border-radius: 10px;
    }
    .message {
      margin-bottom: 10px;
      display: flex;
      align-items: flex-start;
    }
    .message.user {
      justify-content: flex-end;
    }
    .message.bot {
      justify-content: flex-start;
    }
    .message .profile-image {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      margin-left: 10px;
      background-color: #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 14px;
      color: #333;
      overflow: hidden;
    }
    .message.user .profile-image {
      margin-left: 10px;
      margin-right: 0;
    }
    .message div.bubble {
      max-width: 70%;
      padding: 10px 15px;
      border-radius: 20px;
      font-size: 16px;
      line-height: 1.4;
      position: relative;
      word-break: break-word;
    }
    .user div.bubble {
      background-color: #DCF8C6; /* WhatsApp ë§í’ì„  ìƒ‰ìƒ ê³„ì—´ */
      color: #333;
      border-radius: 20px 20px 0 20px;
    }
    .bot div.bubble {
      background-color: #E0F7FA; /* ë°ì€ í•˜ëŠ˜ìƒ‰ ê³„ì—´ */
      color: #333;
      border-radius: 20px 20px 20px 0;
    }
    .message .time {
      font-size: 11px;
      color: #888;
      margin-top: 5px;
    }
    .message.user .time {
      text-align: right;
    }
    #input-area {
      display: flex;
      align-items: center;
      border-top: 1px solid #eee;
      padding-top: 15px;
    }
    #user-input {
      flex-grow: 1;
      padding: 10px 15px;
      border: 1px solid #ccc;
      border-radius: 25px;
      font-size: 16px;
      margin-right: 10px;
    }
    #send-button {
      background-color: #5865F2;
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
    }
    #send-button:hover {
      background-color: #4752C4;
    }
  </style>
</head>
<body>
  <a href="index.html" id="home-button">ğŸ  í™ˆìœ¼ë¡œ</a>
  <div id="chat-container">
    <div id="chat-header">
      <h2>ë§ˆìŒì„ ì½ì–´ì£¼ëŠ” ì±—ë´‡</h2>
      <p>ì˜¤ëŠ˜ ë‹¹ì‹ ì˜ ê¸°ë¶„ì€ ì–´ë– ì‹ ê°€ìš”?</p>
    </div>
    <div id="chat-menu">
      <button class="menu-button" onclick="sendMessage('ì˜¤ëŠ˜ ë‚ ì”¨ ì–´ë•Œ?')">ë‚ ì”¨</button>
      <button class="menu-button" onclick="sendMessage('ì¬ë¯¸ìˆëŠ” ì˜í™” ì¶”ì²œí•´ì¤˜')">ì˜í™” ì¶”ì²œ</button>
      <button class="menu-button" onclick="sendMessage('í˜ë“¤ì–´')">í˜ë“¤ì–´ìš”</button>
      <button class="menu-button" onclick="sendMessage('ì‚¬ë‘í•´')">ì‚¬ë‘í•´</button>
      </div>
    <div id="chat-box"></div>
    <div id="input-area">
      <input type="text" id="user-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." onkeydown="checkEnter(event)" />
      <button id="send-button">â¤</button>
    </div>
  </div>

  <script>
    const chatBox = document.getElementById('chat-box');
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');

    const emotionKeywords = {
      'ìŠ¬í””': [
        'ìŠ¬í¼', 'ìš°ìš¸', 'ëˆˆë¬¼', 'ì™¸ë¡œ', 'ì§€ì³', 'í˜ë“¤ì–´', 'ìƒì²˜', 'ê´´ë¡œì›Œ', 'ì†ìƒí•´',
        'í—ˆì „í•´', 'ë¬´ê¸°ë ¥', 'ì¹¨ìš¸', 'ê°€ìŠ´ ì•„íŒŒ', 'ë§ˆìŒ ì•„íŒŒ', 'ì„œëŸ¬ì›Œ'
      ],
      'ê¸°ì¨': [
        'í–‰ë³µ', 'ê¸°ë»', 'ì¢‹ì•„', 'ì¦ê±°', 'ì›ƒì–´', 'ì„¤ë ˆ', 'ì‹ ë‚˜', 'ë¿Œë“¯', 'ê°ê²©',
        'ìœ ì¾Œ', 'ì§œë¦¿í•´', 'ê¸°ë¶„ ì¢‹ì•„', 'í–‰ë³µí•´', 'ì¦ê±°ì›Œ', 'ê¸°ë¶„ ìµœê³ '
      ],
      'ë¶„ë…¸': [
        'í™”ë‚˜', 'ì§œì¦', 'ì—´ë°›', 'ì§œì¦ë‚˜', 'ë¯¸ì›Œ', 'ë¶„ë…¸', 'ë¶€ê¸€ë¶€ê¸€', 'ì„±ì§ˆë‚˜',
        'ì–µìš¸í•´', 'ì†í„°ì ¸', 'ì´í•´ì•ˆë¼', 'ì§œì¦ë‚˜ê²Œ', 'ê·¹ëŒ€ë…¸', 'ìŠ¹ì§ˆ', 'ì‹¬ê¸° ë¶ˆí¸'
      ],
      'ê°ì‚¬': [
        'ê³ ë§ˆì›Œ', 'ê°ì‚¬', 'ë•ë¶„', 'ê³ ë§™ë‹¤', 'ê°ê²©', 'ì€í˜œ', 'ì§„ì‹¬ìœ¼ë¡œ ê°ì‚¬',
        'ê³ ë§™ìŠµë‹ˆë‹¤', 'ê°ì‚¬ë“œë¦½ë‹ˆë‹¤'
      ],
      'ì‚¬ë‘': [
        'ì‚¬ë‘', 'ë³´ê³ ì‹¶', 'ê·¸ë¦¬ì›Œ', 'ì†Œì¤‘', 'ì¢‹ì•„í•´', 'ì—°ì• ', 'ì• í‹‹', 'ì‚¬ë‘í•´',
        'ë‚´ ì‚¬ëŒ', 'ê·¸ëŒ€', 'ê·¸ë…€', 'ê·¸ì´', 'ë‚´ ì‚¬ë‘', 'ì—°ì¸'
      ],
      'ë¶ˆì•ˆ': [
        'ë¶ˆì•ˆ', 'ê±±ì •', 'ê¸´ì¥', 'ì´ˆì¡°', 'ë¶ˆí¸', 'ë‘ë ¤ì›€', 'ê²ë‚˜', 'ë¶ˆí™•ì‹¤',
        'ë¬´ì„­', 'ì¡°ë§ˆì¡°ë§ˆ', 'í˜¼ë€ìŠ¤ëŸ¬ì›Œ', 'ë¶ˆí¸í•´', 'ë§ˆìŒì´ ë¶ˆì•ˆ', 'ì°ì°í•´'
      ],
      'í”¼ë¡œ': [
        'í”¼ê³¤', 'ì¡¸ë ¤', 'í˜ë“¤ì–´', 'ì§€ì¹œë‹¤', 'í”¼ë¡œ', 'íœ´ì‹ì´ í•„ìš”', 'ë„ˆë¬´ í˜ë“¤ì–´'
      ],
      'ë‹¹í™©': [
        'ë‹¹í™©', 'ì–´ë¦¬ë‘¥ì ˆ', 'ì–´ìƒ‰', 'ë†€ëŒ', 'í™©ë‹¹', 'ì¶©ê²©', 'ë‹¹í˜¹'
      ],
      'ì‚¬ê³ ': [
        'ì‚¬ê³ ', 'ë¶€ìƒ', 'ìœ„í—˜', 'ë¬¸ì œ', 'ì‚¬ê³ ë­‰ì¹˜', 'ì‹¤ìˆ˜', 'íŒ¨ì¸'
      ],
      'ê¸°íƒ€': [
        'ê¸°íƒ€', 'ë³„ë¡œ', 'ë³´í†µ', 'í‰ë²”', 'ê·¸ëƒ¥', 'ì•„ë¬´ë ‡ì§€ ì•Šë‹¤'
      ]
    };

    function detectEmotion(message) {
      const scores = {};
      for (const [emotion, keywords] of Object.entries(emotionKeywords)) {
        scores[emotion] = keywords.reduce((acc, word) => {
          return acc + (message.includes(word) ? 1 : 0);
        }, 0);
      }

      let maxScore = 0;
      let detected = 'ê¸°íƒ€';
      for (const [emotion, score] of Object.entries(scores)) {
        if (score > maxScore) {
          maxScore = score;
          detected = emotion;
        }
      }

      return detected;
    }

    function generateReply(message) {
      message = message.toLowerCase();
      const emotion = detectEmotion(message);

      switch (emotion) {
        case 'ìŠ¬í””':
          return 'ê´œì°®ì•„, ë‚´ê°€ ì˜†ì— ìˆì–´ì¤„ê²Œ ğŸ’•';
        case 'ê¸°ì¨':
          return 'í–‰ë³µí•˜ë‹¤ë‹ˆ ë‚˜ë„ ê¸°ë» ğŸ˜Š';
        case 'ë¶„ë…¸':
          return 'ê·¸ëŸ´ ë• ì‹¬í˜¸í¡ì´ ì¢‹ì•„ìš”. í›„~ ğŸ˜¤';
        case 'ê°ì‚¬':
          return 'ì²œë§Œì—ìš”! ë‹¹ì‹ ì€ ì†Œì¤‘í•œ ì‚¬ëŒì´ì—ìš” ğŸ’–';
        case 'ì‚¬ë‘':
          return 'ì‚¬ë‘ì€ ì°¸ ì•„ë¦„ë‹¤ìš´ ê°ì •ì´ì£  ğŸ’';
        case 'ë¶ˆì•ˆ':
          return 'ë¶ˆì•ˆí•  ë• ì ì‹œ ë©ˆì¶”ê³  ìˆ¨ì„ í¬ê²Œ ì‰¬ì–´ë´ìš” ğŸŒ¿';
        case 'í”¼ë¡œ':
          return 'íœ´ì‹ì´ í•„ìš”í•´ ë³´ì´ë„¤ìš”. ì ê¹ ì‰¬ì–´ê°€ì„¸ìš” ğŸ›‹ï¸';
        case 'ë‹¹í™©':
          return 'ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”, ì²œì²œíˆ ìƒê°í•´ë´ìš” ğŸ˜Œ';
        case 'ì‚¬ê³ ':
          return 'í˜¹ì‹œ ë‹¤ì¹œ ê±´ ì•„ë‹ˆì£ ? ì•ˆì „ì„ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í•´ìš” ğŸš‘';
        case 'ê¸°íƒ€':
          return 'ê·¸ë ‡êµ¬ë‚˜! ë” ì´ì•¼ê¸°í•´ì¤˜ âœ¨';
        case 'ë‚ ì”¨':
          return 'ë‚ ì”¨ëŠ” ì¢‹ë‹¤ê³  í•˜ë„¤ìš”. ë°–ì— ë‚˜ê°€ì„œ ê¸°ë¶„ ì „í™˜ í•´ë³´ì„¸ìš” ğŸŒ';
        case 'ì˜í™”':
          return 'ì˜¤ëŠ˜ì€ ê°ë™ì ì¸ ì˜í™”ë¥¼ ì¶”ì²œë“œë¦´ê²Œìš”: "ì¸ì‚¬ì´ë“œ ì•„ì›ƒ"ì´ë‚˜ "ë¼ë¼ëœë“œ" ì–´ë•Œìš”? ğŸ¬';
        default:
          return 'ê·¸ë ‡êµ¬ë‚˜! ë” ì´ì•¼ê¸°í•´ì¤˜ âœ¨';
      }
    }

    function displayMessage(sender, message) {
      const messageDiv = document.createElement('div');
      messageDiv.className = `message ${sender}`;
      messageDiv.innerHTML = `
        <div class="profile-image">${sender === 'user' ? 'ğŸ‘¤' : 'ğŸ¤–'}</div>
        <div class="bubble">${message}</div>
        <div class="time">${getCurrentTime()}</div>
      `;
      chatBox.appendChild(messageDiv);
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function sendMessage(text) {
      let userMessage = text ? text : userInput.value.trim();
      if (!userMessage) return;

      displayMessage('user', userMessage);
      userInput.value = '';

      setTimeout(() => {
        const botReply = generateReply(userMessage);
        displayMessage('bot', botReply);
      }, 500); // ì•½ê°„ì˜ ë”œë ˆì´ë¥¼ ì¤˜ì„œ ì±—ë´‡ì´ ì‘ë‹µí•˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì´ê²Œ í•¨
    }

    function checkEnter(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }

    function getCurrentTime() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      return `${hours}:${minutes}`;
    }

    sendButton.addEventListener('click', sendMessage);
  </script>
</body>
</html>
