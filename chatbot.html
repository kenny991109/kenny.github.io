<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê°ì„± ì±—ë´‡</title>
  <style>
    /* ê¸°ì¡´ CSS ì½”ë“œëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€í•©ë‹ˆë‹¤. */
    body {
      font-family: 'Pretendard', sans-serif;
      background-color: #f8f9fa;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    #home-button {
      position: absolute;
      top: 20px;
      left: 20px;
      text-decoration: none;
      background-color: #5865F2;
      color: white;
      padding: 10px 15px;
      border-radius: 5px;
      font-weight: bold;
      z-index: 10;
    }
    #home-button:hover {
      background-color: #4752C4;
    }
    #chat-container {
      width: 100%;
      max-width: 450px;
      background: #fff;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      padding: 20px;
      display: flex;
      flex-direction: column;
      height: 600px;
    }
    #chat-header {
      padding: 15px 0;
      text-align: center;
      border-bottom: 1px solid #eee;
      margin-bottom: 15px;
    }
    #chat-header h2 {
      margin: 0;
      color: #333;
      font-size: 20px;
    }
    #chat-menu {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 15px;
    }
    .menu-button {
      background-color: #e0e0e0;
      color: #333;
      border: none;
      border-radius: 20px;
      padding: 8px 12px;
      font-size: 14px;
      cursor: pointer;
    }
    .menu-button:hover {
      background-color: #d0d0d0;
    }
    #chat-box {
      flex-grow: 1;
      overflow-y: auto;
      padding: 10px;
      margin-bottom: 15px;
      display: flex;
      flex-direction: column;
      scrollbar-width: thin;
      scrollbar-color: #aaa #f0f0f0;
    }
    #chat-box::-webkit-scrollbar {
      width: 8px;
    }
    #chat-box::-webkit-scrollbar-thumb {
      background-color: #aaa;
      border-radius: 10px;
    }
    #chat-box::-webkit-scrollbar-track {
      background-color: #f0f0f0;
      border-radius: 10px;
    }
    .message {
      margin-bottom: 10px;
      display: flex;
      align-items: flex-start;
    }
    .message.user {
      justify-content: flex-end;
    }
    .message.bot {
      justify-content: flex-start;
    }
    .message .profile-image {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      margin-right: 10px;
      margin-left: 10px;
      background-color: #ddd;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 14px;
      color: #333;
      overflow: hidden;
    }
    .message.user .profile-image {
      margin-left: 10px;
      margin-right: 0;
    }
    .message div.bubble {
      max-width: 70%;
      padding: 10px 15px;
      border-radius: 20px;
      font-size: 16px;
      line-height: 1.4;
      position: relative;
      word-break: break-word;
    }
    .user div.bubble {
      background-color: #DCF8C6;
      color: #333;
      border-radius: 20px 20px 0 20px;
    }
    .bot div.bubble {
      background-color: #E0F7FA;
      color: #333;
      border-radius: 20px 20px 20px 0;
    }
    .message .time {
      font-size: 11px;
      color: #888;
      margin-top: 5px;
    }
    .message.user .time {
      text-align: right;
    }
    #input-area {
      display: flex;
      flex-direction: column; /* ìë™ ì™„ì„± ëª©ë¡ì„ ìœ„í•´ flex-direction ë³€ê²½ */
      align-items: flex-end; /* ë³´ë‚´ê¸° ë²„íŠ¼ ì˜¤ë¥¸ìª½ ì •ë ¬ ìœ ì§€ */
      border-top: 1px solid #eee;
      padding-top: 15px;
    }
    #user-input-container {
      display: flex;
      width: 100%; /* ì…ë ¥ì°½ ì „ì²´ ë„ˆë¹„ ì‚¬ìš© */
      margin-bottom: 5px; /* ìë™ ì™„ì„± ëª©ë¡ê³¼ì˜ ê°„ê²© */
    }
    #user-input {
      flex-grow: 1;
      padding: 10px 15px;
      border: 1px solid #ccc;
      border-radius: 25px;
      font-size: 16px;
      margin-right: 10px;
    }
    #autocomplete-list {
      list-style: none;
      padding: 0;
      margin: 0;
      border: 1px solid #ccc;
      border-top: none;
      background-color: #fff;
      border-radius: 0 0 5px 5px;
      width: 100%;
      max-height: 150px;
      overflow-y: auto;
      z-index: 10; /* ë‹¤ë¥¸ ìš”ì†Œ ìœ„ì— í‘œì‹œ */
    }
    #autocomplete-list li {
      padding: 8px 12px;
      cursor: pointer;
      font-size: 16px;
    }
    #autocomplete-list li:hover {
      background-color: #f0f0f0;
    }
    #send-button {
      background-color: #5865F2;
      color: white;
      border: none;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 18px;
    }
    #send-button:hover {
      background-color: #4752C4;
    }
  </style>
</head>
<body>
  <a href="index.html" id="home-button">ğŸ  í™ˆìœ¼ë¡œ</a>
  <div id="chat-container">
    <div id="chat-header">
      <h2>ë§ˆìŒì„ ì½ì–´ì£¼ëŠ” ì±—ë´‡</h2>
      <p>ì˜¤ëŠ˜ ë‹¹ì‹ ì˜ ê¸°ë¶„ì€ ì–´ë– ì‹ ê°€ìš”?</p>
    </div>
    <div id="chat-menu">
      <button class="menu-button" onclick="sendMessage('ì˜¤ëŠ˜ ë‚ ì”¨ ì–´ë•Œ?')">ë‚ ì”¨</button>
      <button class="menu-button" onclick="sendMessage('ì¬ë¯¸ìˆëŠ” ì˜í™” ì¶”ì²œí•´ì¤˜')">ì˜í™” ì¶”ì²œ</button>
      <button class="menu-button" onclick="sendMessage('í˜ë“¤ì–´')">í˜ë“¤ì–´ìš”</button>
      <button class="menu-button" onclick="sendMessage('ì‚¬ë‘í•´')">ì‚¬ë‘í•´</button>
      <button class="menu-button" onclick="sendMessage('ë­ í–ˆì–´?')">ë­ í–ˆì–´?</button>
      <button class="menu-button" onclick="sendMessage('ì‹¬ì‹¬í•´')">ì‹¬ì‹¬í•´</button>
    </div>
    <div id="chat-box"></div>
    <div id="input-area">
      <div id="user-input-container">
        <input type="text" id="user-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." onkeydown="checkEnter(event)" oninput="autocomplete()" />
        <ul id="autocomplete-list"></ul>
      </div>
      <button id="send-button">â¤</button>
    </div>
  </div>

  <script>
    const chatBox = document.getElementById('chat-box');
    const userInput = document.getElementById('user-input');
    const sendButton = document.getElementById('send-button');
    const autocompleteList = document.getElementById('autocomplete-list');

    const emotionKeywords = { /* ê¸°ì¡´ emotionKeywords ê°ì²´ */ };
    const customReplies = { /* ê¸°ì¡´ customReplies ê°ì²´ */ };

    // ìë™ ì™„ì„±ì— ì‚¬ìš©ë  ì§ˆë¬¸ ëª©ë¡
    const questionList = [
      'ì˜¤ëŠ˜ ë‚ ì”¨ ì–´ë•Œ?',
      'ì¬ë¯¸ìˆëŠ” ì˜í™” ì¶”ì²œí•´ì¤˜',
      'í˜ë“¤ì–´',
      'ì‚¬ë‘í•´',
      'ë­ í–ˆì–´?',
      'ì‹¬ì‹¬í•´',
      'ê³ ë§ˆì›Œ',
      'ìš°ìš¸í•´',
      'í™”ë‚˜',
      'ë³´ê³  ì‹¶ì–´',
      'ì¡¸ë ¤',
      'ë°°ê³ íŒŒ',
      'ì˜¤ëŠ˜ ê¸°ë¶„ ì–´ë•Œ?',
      'ë‚˜ ì¹­ì°¬í•´ì¤˜',
      'ì¢‹ì•„í•˜ëŠ” ìƒ‰ê¹”ì€ ë­ì•¼?'
      // ë” ë§ì€ ì§ˆë¬¸ ì¶”ê°€ ê°€ëŠ¥
    ];

    function detectEmotion(message) { /* ê¸°ì¡´ detectEmotion í•¨ìˆ˜ */ }
    function generateReply(message) { /* ê¸°ì¡´ generateReply í•¨ìˆ˜ */ }
    function displayMessage(sender, message) { /* ê¸°ì¡´ displayMessage í•¨ìˆ˜ */ }
    function getCurrentTime() { /* ê¸°ì¡´ getCurrentTime í•¨ìˆ˜ */ }

    function sendMessage(text) {
      let userMessage = text ? text : userInput.value.trim();
      if (!userMessage) return;

      displayMessage('user', userMessage);
      userInput.value = '';
      autocompleteList.innerHTML = ''; // ë©”ì‹œì§€ ì „ì†¡ í›„ ìë™ ì™„ì„± ëª©ë¡ ìˆ¨ê¹€

      setTimeout(() => {
        const botReply = generateReply(userMessage);
        displayMessage('bot', botReply);
      }, 500);
    }

    function checkEnter(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }

    function autocomplete() {
      const inputText = userInput.value.toLowerCase();
      autocompleteList.innerHTML = ''; // ì´ì „ ì¶”ì²œ ëª©ë¡ ë¹„ìš°ê¸°

      if (!inputText) return;

      const suggestions = questionList.filter(question =>
        question.toLowerCase().startsWith(inputText)
      );

      suggestions.forEach(suggestion => {
        const listItem = document.createElement('li');
        listItem.textContent = suggestion;
        listItem.addEventListener('click', () => {
          userInput.value = suggestion;
          autocompleteList.innerHTML = ''; // ì„ íƒ í›„ ëª©ë¡ ìˆ¨ê¹€
        });
        autocompleteList.appendChild(listItem);
      });
    }

    sendButton.addEventListener('click', sendMessage);

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì™„ì„± ëª©ë¡ ìˆ¨ê¹€
    autocompleteList.style.display = 'none';

    // ì…ë ¥ì°½ focus ì‹œ ìë™ ì™„ì„± ëª©ë¡ í‘œì‹œ (ì…ë ¥ ì—†ì–´ë„ ì „ì²´ ëª©ë¡ ë³´ì´ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´)
    userInput.addEventListener('focus', () => {
      autocompleteList.style.display = userInput.value ? 'block' : 'none';
      if (!userInput.value) {
        autocompleteList.innerHTML = '';
        questionList.forEach(suggestion => {
          const listItem = document.createElement('li');
          listItem.textContent = suggestion;
          listItem.addEventListener('click', () => {
            userInput.value = suggestion;
            autocompleteList.innerHTML = '';
          });
          autocompleteList.appendChild(listItem);
        });
        if (questionList.length > 0) autocompleteList.style.display = 'block';
      }
    });

    // ì…ë ¥ì°½ blur ì‹œ ìë™ ì™„ì„± ëª©ë¡ ìˆ¨ê¹€ (ì„ íƒí•˜ì§€ ì•Šê³  ë²—ì–´ë‚  ê²½ìš°)
    userInput.addEventListener('blur', () => {
      setTimeout(() => {
        autocompleteList.style.display = 'none';
      }, 200); // ì•½ê°„ì˜ ë”œë ˆì´ë¥¼ ì£¼ì–´ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
    });

    // ì…ë ¥ ë‚´ìš© ë³€ê²½ ì‹œ ìë™ ì™„ì„± ëª©ë¡ í‘œì‹œ
    userInput.addEventListener('input', () => {
      autocompleteList.style.display = userInput.value ? 'block' : 'none';
    });
  </script>
</body>
</html>
