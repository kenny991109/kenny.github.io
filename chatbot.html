<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê°ì„± ì±—ë´‡</title>
  <style>
    body {
      font-family: 'Pretendard', sans-serif;
      background-color: #f4f6f9;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    #home-button {
      position: absolute;
      top: 20px;
      left: 20px;
      text-decoration: none;
      background-color: #ff66b2;
      color: white;
      padding: 10px 15px;
      border-radius: 5px;
      font-weight: bold;
      font-size: 18px;
    }
    #home-button:hover {
      background-color: #ff3385;
    }
    #chat-container {
      width: 100%;
      max-width: 600px;
      height: 70vh;
      background: white;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
      padding: 30px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    #chat-box {
      flex-grow: 1;
      overflow-y: auto;
      padding-right: 15px;
      margin-bottom: 20px;
      max-height: 80%;
    }
    .message {
      margin: 10px 0;
      display: flex;
      justify-content: flex-start;
      align-items: center;
    }
    .message.user {
      justify-content: flex-end;
    }
    .message.bot {
      justify-content: flex-start;
    }
    .message div {
      max-width: 75%;
      padding: 15px;
      border-radius: 20px;
      font-size: 18px;
      line-height: 1.5;
    }
    .user div {
      background-color: #ff66b2;
      color: white;
      border-radius: 20px 20px 0 20px;
    }
    .bot div {
      background-color: #e6e6e6;
      color: #333;
      border-radius: 20px 20px 20px 0;
    }
    #input-area {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    input[type="text"] {
      width: 80%;
      padding: 15px;
      border: 1px solid #ccc;
      border-radius: 25px;
      font-size: 18px;
      margin-right: 10px;
    }
    button {
      padding: 15px 25px;
      background-color: #ff66b2;
      color: white;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      font-size: 18px;
    }
    button:hover {
      background-color: #ff3385;
    }
    .guide {
      margin-bottom: 10px;
      padding: 12px;
      background-color: #ff66b2;
      color: white;
      border-radius: 5px;
      font-size: 18px;
      font-weight: bold;
    }
    .button-group {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      margin-top: 30px;
    }
    .button-group button {
      background-color: #e6e6e6;
      color: #333;
      border: none;
      border-radius: 20px;
      padding: 15px 30px;
      cursor: pointer;
      font-size: 18px;
    }
    .button-group button:hover {
      background-color: #ff66b2;
      color: white;
    }
  </style>
</head>
<body>
  <a href="index.html" id="home-button">ğŸ  í™ˆìœ¼ë¡œ</a>
  <div id="chat-container">
    <div id="chat-box"></div>
    <div id="input-area">
      <input type="text" id="user-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”..." onkeydown="checkEnter(event)" />
      <button onclick="sendMessage()">ë³´ë‚´ê¸°</button>
    </div>
    <div class="button-group">
      <button onclick="sendScenario('ê°ì • ìƒíƒœ ì•Œë ¤ì¤„ê²Œìš”!')">ê°ì • ìƒíƒœ ì•Œë ¤ì¤„ê²Œìš”!</button>
      <button onclick="sendScenario('ë‚ ì”¨ëŠ” ì–´ë•Œ?')">ë‚ ì”¨ëŠ” ì–´ë•Œ?</button>
      <button onclick="sendScenario('ì¶”ì²œí•  ì˜í™” ìˆì–´?')">ì¶”ì²œí•  ì˜í™” ìˆì–´?</button>
    </div>
  </div>

  <script>
    const emotionKeywords = {
      'ìŠ¬í””': ['ìŠ¬í¼', 'ìš°ìš¸', 'ëˆˆë¬¼', 'ì™¸ë¡œ', 'ì§€ì³', 'í˜ë“¤ì–´', 'ìƒì²˜', 'ê´´ë¡œì›Œ', 'ì†ìƒí•´', 'í—ˆì „í•´', 'ë¬´ê¸°ë ¥', 'ì¹¨ìš¸', 'ê°€ìŠ´ ì•„íŒŒ', 'ë§ˆìŒ ì•„íŒŒ', 'ì„œëŸ¬ì›Œ'],
      'ê¸°ì¨': ['í–‰ë³µ', 'ê¸°ë»', 'ì¢‹ì•„', 'ì¦ê±°', 'ì›ƒì–´', 'ì„¤ë ˆ', 'ì‹ ë‚˜', 'ë¿Œë“¯', 'ê°ê²©', 'ìœ ì¾Œ', 'ì§œë¦¿í•´', 'ê¸°ë¶„ ì¢‹ì•„', 'í–‰ë³µí•´', 'ì¦ê±°ì›Œ', 'ê¸°ë¶„ ìµœê³ '],
      'ë¶„ë…¸': ['í™”ë‚˜', 'ì§œì¦', 'ì—´ë°›', 'ì§œì¦ë‚˜', 'ë¯¸ì›Œ', 'ë¶„ë…¸', 'ë¶€ê¸€ë¶€ê¸€', 'ì„±ì§ˆë‚˜', 'ì–µìš¸í•´', 'ì†í„°ì ¸', 'ì´í•´ì•ˆë¼', 'ì§œì¦ë‚˜ê²Œ', 'ê·¹ëŒ€ë…¸', 'ìŠ¹ì§ˆ', 'ì‹¬ê¸° ë¶ˆí¸'],
      'ê°ì‚¬': ['ê³ ë§ˆì›Œ', 'ê°ì‚¬', 'ë•ë¶„', 'ê³ ë§™ë‹¤', 'ê°ê²©', 'ì€í˜œ', 'ì§„ì‹¬ìœ¼ë¡œ ê°ì‚¬', 'ê³ ë§™ìŠµë‹ˆë‹¤', 'ê°ì‚¬ë“œë¦½ë‹ˆë‹¤'],
      'ì‚¬ë‘': ['ì‚¬ë‘', 'ë³´ê³ ì‹¶', 'ê·¸ë¦¬ì›Œ', 'ì†Œì¤‘', 'ì¢‹ì•„í•´', 'ì—°ì• ', 'ì• í‹‹', 'ì‚¬ë‘í•´', 'ë‚´ ì‚¬ëŒ', 'ê·¸ëŒ€', 'ê·¸ë…€', 'ê·¸ì´', 'ë‚´ ì‚¬ë‘', 'ì—°ì¸'],
      'ë¶ˆì•ˆ': ['ë¶ˆì•ˆ', 'ê±±ì •', 'ê¸´ì¥', 'ì´ˆì¡°', 'ë¶ˆí¸', 'ë‘ë ¤ì›€', 'ê²ë‚˜', 'ë¶ˆí™•ì‹¤', 'ë¬´ì„­', 'ì¡°ë§ˆì¡°ë§ˆ', 'í˜¼ë€ìŠ¤ëŸ¬ì›Œ', 'ë¶ˆí¸í•´', 'ë§ˆìŒì´ ë¶ˆì•ˆ', 'ì°ì°í•´'],
      'í”¼ë¡œ': ['í”¼ê³¤', 'ì¡¸ë ¤', 'í˜ë“¤ì–´', 'í”¼ë¡œ', 'íœ´ì‹ì´ í•„ìš”', 'ë„ˆë¬´ í˜ë“¤ì–´'],
      'ë‹¹í™©': ['ë‹¹í™©', 'ì–´ë¦¬ë‘¥ì ˆ', 'ì–´ìƒ‰', 'ë†€ëŒ', 'í™©ë‹¹', 'ì¶©ê²©', 'ë‹¹í˜¹'],
      'ì‚¬ê³ ': ['ì‚¬ê³ ', 'ë¶€ìƒ', 'ìœ„í—˜', 'ë¬¸ì œ', 'ì‚¬ê³ ë­‰ì¹˜', 'ì‹¤ìˆ˜', 'íŒ¨ì¸'],
      'ê¸°íƒ€': ['ê¸°íƒ€', 'ë³„ë¡œ', 'ë³´í†µ', 'í‰ë²”', 'ê·¸ëƒ¥', 'ì•„ë¬´ë ‡ì§€ ì•Šë‹¤']
    };

    function detectEmotion(message) {
      const scores = {};
      for (const [emotion, keywords] of Object.entries(emotionKeywords)) {
        scores[emotion] = keywords.reduce((acc, word) => acc + (message.includes(word) ? 1 : 0), 0);
      }

      let maxScore = 0;
      let detected = 'ê¸°íƒ€';
      for (const [emotion, score] of Object.entries(scores)) {
        if (score > maxScore) {
          maxScore = score;
          detected = emotion;
        }
      }

      return detected;
    }

    function generateReply(message) {
      message = message.toLowerCase();
      const emotion = detectEmotion(message);

      switch (emotion) {
        case 'ìŠ¬í””':
          return 'ê´œì°®ì•„, ë‚´ê°€ ì˜†ì— ìˆì–´ì¤„ê²Œ ğŸ’•';
        case 'ê¸°ì¨':
          return 'í–‰ë³µí•˜ë‹¤ë‹ˆ ë‚˜ë„ ê¸°ë» ğŸ˜Š';
        case 'ë¶„ë…¸':
          return 'ê·¸ëŸ´ ë• ì‹¬í˜¸í¡ì´ ì¢‹ì•„ìš”. í›„~ ğŸ˜¤';
        case 'ê°ì‚¬':
          return 'ì²œë§Œì—ìš”! ë‹¹ì‹ ì€ ì†Œì¤‘í•œ ì‚¬ëŒì´ì—ìš” ğŸ’–';
        case 'ì‚¬ë‘':
          return 'ì‚¬ë‘ì€ ì°¸ ì•„ë¦„ë‹¤ìš´ ê°ì •ì´ì£  ğŸ’';
        case 'ë¶ˆì•ˆ':
          return 'ë¶ˆì•ˆí•  ë• ì ì‹œ ë©ˆì¶”ê³  ìˆ¨ì„ í¬ê²Œ ì‰¬ì–´ë´ìš” ğŸŒ¿';
        case 'í”¼ë¡œ':
          return 'íœ´ì‹ì´ í•„ìš”í•´ ë³´ì´ë„¤ìš”. ì ê¹ ì‰¬ì–´ê°€ì„¸ìš” ğŸ›‹ï¸';
        case 'ë‹¹í™©':
          return 'ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”, ì²œì²œíˆ ìƒê°í•´ë´ìš” ğŸ˜Œ';
        case 'ì‚¬ê³ ':
          return 'í˜¹ì‹œ ë‹¤ì¹œ ê±´ ì•„ë‹ˆì£ ? ì•ˆì „ì„ ìµœìš°ì„ ìœ¼ë¡œ ìƒê°í•´ìš” ğŸš‘';
        case 'ê¸°íƒ€':
          return 'ê·¸ë ‡êµ¬ë‚˜! ë” ì´ì•¼ê¸°í•´ì¤˜ âœ¨';

        case 'ë‚ ì”¨':
          return 'ë‚ ì”¨ëŠ” ì¢‹ë‹¤ê³  í•˜ë„¤ìš”. ë°–ì— ë‚˜ê°€ì„œ ê¸°ë¶„ ì „í™˜ í•´ë³´ì„¸ìš” ğŸŒ';

        case 'ì˜í™”':
          return 'ì˜¤ëŠ˜ì€ ê°ë™ì ì¸ ì˜í™”ë¥¼ ì¶”ì²œë“œë¦´ê²Œìš”: "ì¸ì‚¬ì´ë“œ ì•„ì›ƒ"ì´ë‚˜ "ë¼ë¼ëœë“œ" ì–´ë•Œìš”? ğŸ¬';

        default:
          return 'ê·¸ë ‡êµ¬ë‚˜! ë” ì´ì•¼ê¸°í•´ì¤˜ âœ¨';
      }
    }

    function sendMessage() {
      const input = document.getElementById('user-input');
      const chatBox = document.getElementById('chat-box');
      const userMessage = input.value.trim();
      if (!userMessage) return;

      // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
      const userDiv = document.createElement('div');
      userDiv.classList.add('message', 'user');
      userDiv.innerHTML = `<div>${userMessage}</div>`;
      chatBox.appendChild(userDiv);

      // ë´‡ ì‘ë‹µ ìƒì„±
      const botReply = generateReply(userMessage);
      const botDiv = document.createElement('div');
      botDiv.classList.add('message', 'bot');
      botDiv.innerHTML = `<div>${botReply}</div>`;
      chatBox.appendChild(botDiv);

      // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
      input.value = '';
      chatBox.scrollTop = chatBox.scrollHeight;
    }

    function checkEnter(event) {
      if (event.key === 'Enter') {
        sendMessage();
      }
    }

    function sendScenario(message) {
      const chatBox = document.getElementById('chat-box');
      
      // ì‹œë‚˜ë¦¬ì˜¤ ì•ˆë‚´ ë©”ì‹œì§€ ì¶”ê°€
      const guideDiv = document.createElement('div');
      guideDiv.classList.add('guide');
      guideDiv.innerHTML = `<div>${message}</div>`;
      chatBox.appendChild(guideDiv);
    }
  </script>
</body>
</html>
